{% extends 'components/layout.swig.html' %}

{% block css %}
	<!-- CSS Page Style -->
	<link rel="stylesheet" href="{{ assetPrefix }}/css/pages/log-reg-v3.css">
	<link rel="stylesheet"
	      href="{{ assetPrefix }}/plugins/master-slider/quick-start/masterslider/style/masterslider.css">
	<link rel="stylesheet"
	      href="{{ assetPrefix }}/plugins/master-slider/quick-start/masterslider/skins/default/style.css">

	{% include 'components/profile/commoncss.swig.html' %}
{% endblock %}

{% block content %}
	<!--=== Shop Product ===-->
	<div class="shop-product">
		<div class="container">
			<div class="row">
				{% include 'components/flashhandler.swig.html' %}
				<div class="col-md-6 md-margin-bottom-50">
					<div class="ms-showcase2-template">
						{# Master Slider #}
						<div class="master-slider ms-skin-default" id="masterslider">
							{% for image in addon.galleryImages %}
								<div class="ms-slide">
									<img class="ms-brd" src="/addons/{{ addon.id }}/artwork/{{ image }}"
									     data-src="/addons/{{ addon.id }}/artwork/{{ image }}"alt="lorem ipsum dolor sit">
									<img class="ms-thumb" src="/addons/{{ addon.id }}/artwork/{{ image }}" alt="thumb" width="180" height="180">
								</div>
							{% endfor %}
						</div>
						{# End Master Slider #}
					</div>
				</div>

				<div class="col-md-6">
					<div class="shop-product-heading">
						<h2>{{ addon.name }}</h2>
					</div>

					<p>{{ addon.shortDescription }}</p><br>

					{# Addon price + sale price (if specificed) #}
					<ul class="list-inline shop-product-prices margin-bottom-30">
						{% if addon.price > 0.0 %}
							{% if addon.discount > 0.0 %}
								<li class="shop-red">${{ addon.price / 100 * (1.0 - addon.discount) }}</li>
								<li class="line-through">${{ addon.price / 100 }}</li>
							{% else %}
								<li class="">${{ addon.price / 100 }}</li>
							{% endif %}
						{% else %}
							<li class="shop-red">Free</li>
						{% endif %}
					</ul>

					<div class="margin-bottom-40">
						{% if addon.price > 0.0 %}
							{% if addon.canDownload(user) %}
								<button type="button" class="btn-u btn-u-sea-shop btn-u-lg"
								        onclick="window.location.href = '/addons/{{ addon.id }}/download'">Download
								</button>
							{% else %}
								<button type="button" id="purchaseButton" class="btn-u btn-u-sea-shop btn-u-lg">
									Purchase
								</button>
							{% endif %}
						{% else %}
							<button type="button" class="btn-u btn-u-sea-shop btn-u-lg"
							        onclick="window.location.href = '/addons/{{ addon.id }}/download'">Download
							</button>
							<button type="button" id="purchaseButton" class="btn-u btn-u-sea-shop btn-u-lg">Donate
							</button>
						{% endif %}
					</div>
					<!--/end product quantity-->

					{# Addon tags #}
					<p class="wishlist-category"><strong>Tags:</strong> {{ addon.prettyTags() }}</p>
				</div>
			</div>
			<!--/end row-->
		</div>
	</div>
	<!--=== End Shop Product ===-->

	<!--=== Content Medium ===-->
	<div class="content-md container">
		<div class="tab-v5">
			<ul class="nav nav-tabs" role="tablist">
				<li class="active"><a href="#description" role="tab" data-toggle="tab">Description</a></li>
				{#<li><a href="#reviews" role="tab" data-toggle="tab">Reviews (1)</a></li>#}
			</ul>

			<div class="tab-content">
				<!-- Description -->
				<div class="tab-pane fade in active" id="description">
					<div class="row">
						<div class="col-md-7">
							<p>{{ addon.description }}</p><br>

							<h3 class="heading-md margin-bottom-20">Specifics</h3>

							<div class="row">
								<div class="col-sm-6">
									<ul class="list-unstyled specifies-list">
										<li><i class="icon icon-caret-right"></i>Author:
											<span>{{ addon.author.username }}</span></li>
										<li><i class="icon icon-caret-right"></i>Gamemode:
											<span>{{ addon.prettyGamemode() }}</span></li>
										<li><i class="icon icon-caret-right"></i>Type:
											<span>{{ addon.prettyType() }}</span></li>
										<li><i class="icon icon-caret-right"></i>Contains DRM:
											<span>{% if addon.containsDrm %}Yes{% else %}No{% endif %}</span></li>
										<li><i class="icon icon-caret-right"></i>Contacts Outside Servers:
											<span>{% if addon.outsideServers %}Yes{% else %}No{% endif %}</span></li>
										<li><i class="icon icon-caret-right"></i>Size:
											<span>{{ (addon.size / 1024).toFixed(2) }} KB</span></li>
									</ul>
								</div>
							</div>
						</div>
						<div class="col-md-5">
							{% if addon.youtubeLink %}
								<div class="responsive-video">
									<iframe width="100%" src="{{ addon.youtubeLink }}" frameborder="0"
									        allowfullscreen=""></iframe>
								</div>
							{% endif %}
						</div>
					</div>
				</div>
				<!-- End Description -->

				{#<!-- Reviews -->#}
				{#<div class="tab-pane fade" id="reviews">#}
				{#<div class="product-comment margin-bottom-40">#}
				{#<div class="product-comment-in">#}
				{#<img class="product-comment-img rounded-x" src="assets/img/team/01.jpg" alt="">#}
				{#<div class="product-comment-dtl">#}
				{#<h4>Mickel <small>22 days ago</small></h4>#}
				{#<p>I like the green colour, it's very likeable and reminds me of Hollister. A little loose though but I am very skinny</p>#}
				{#<ul class="list-inline product-ratings">#}
				{#<li class="reply"><a href="#">Reply</a></li>#}
				{#<li class="pull-right">#}
				{#<ul class="list-inline">#}
				{#<li><i class="rating-selected icon icon-star"></i></li>#}
				{#<li><i class="rating-selected icon icon-star"></i></li>#}
				{#<li><i class="rating-selected icon icon-star"></i></li>#}
				{#<li><i class="rating icon icon-star"></i></li>#}
				{#<li><i class="rating icon icon-star"></i></li>#}
				{#</ul>#}
				{#</li>#}
				{#</ul>#}
				{#</div>#}
				{#</div>#}
				{#</div>#}
				{#<h3 class="heading-md margin-bottom-30">Add a review</h3>#}
				{#<form action="assets/php/demo-contacts-process.php" method="post" id="sky-form3" class="sky-form sky-changes-4">#}
				{#<fieldset>#}
				{#<div class="margin-bottom-30">#}
				{#<label class="label-v2">Name</label>#}
				{#<label class="input">#}
				{#<input type="text" name="name" id="name">#}
				{#</label>#}
				{#</div>#}

				{#<div class="margin-bottom-30">#}
				{#<label class="label-v2">Email</label>#}
				{#<label class="input">#}
				{#<input type="email" name="email" id="email">#}
				{#</label>#}
				{#</div>#}

				{#<div class="margin-bottom-30">#}
				{#<label class="label-v2">Review</label>#}
				{#<label class="textarea">#}
				{#<textarea rows="7" name="message" id="message"></textarea>#}
				{#</label>#}
				{#</div>#}
				{#</fieldset>#}

				{#<footer class="review-submit">#}
				{#<label class="label-v2">Review</label>#}
				{#<div class="stars-ratings">#}
				{#<input type="radio" name="stars-rating" id="stars-rating-5">#}
				{#<label for="stars-rating-5"><i class="icon icon-star"></i></label>#}
				{#<input type="radio" name="stars-rating" id="stars-rating-4">#}
				{#<label for="stars-rating-4"><i class="icon icon-star"></i></label>#}
				{#<input type="radio" name="stars-rating" id="stars-rating-3">#}
				{#<label for="stars-rating-3"><i class="icon icon-star"></i></label>#}
				{#<input type="radio" name="stars-rating" id="stars-rating-2">#}
				{#<label for="stars-rating-2"><i class="icon icon-star"></i></label>#}
				{#<input type="radio" name="stars-rating" id="stars-rating-1">#}
				{#<label for="stars-rating-1"><i class="icon icon-star"></i></label>#}
				{#</div>#}
				{#<button type="button" class="btn-u btn-u-sea-shop btn-u-sm pull-right">Submit</button>#}
				{#</footer>#}
				{#</form>#}
				{#</div>#}
				{#<!-- End Reviews -->#}
			</div>
		</div>
	</div><!--/end container-->
	<!--=== End Content Medium ===-->

	<div class="modal fade" id="paymentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
	     aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
								aria-hidden="true">&times;</span></button>
					<h4 class="modal-title">Checkout</h4>
				</div>
				<div class="modal-body sky-form">
					<section>
						<label class="label">Choose Payment Method</label>

						<div class="inline-group">
							<label class="radio"><input type="radio" name="radio-inline" checked
							                            id="payWithAccountBalance"><i></i>Account Balance</label>
							{#<label class="radio"><input type="radio" name="radio-inline" id="payWithPayPal"><i></i>PayPal</label>#}
							<label class="radio"><input type="radio" name="radio-inline" id="payWithCreditCard"><i></i>Credit
								Card</label>
						</div>
					</section>

					{% if addon.price == 0 %}
						<section>
							<label class="label">Donation Amount</label>
							<label class="input">
								<input type="number" id="donationInput">
							</label>
						</section>
					{% else %}
						<section>
							<label class="label">Coupon Code</label>
							<label class="input" id="couponLabel">
								<input type="text" id="couponInput">
							</label>

							<div class="note" id="couponNote"></div>
						</section>
					{% endif %}
					<p>Total Bill: <span id="totalBill">${{ addon.price / 100 }} USD</span></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					{% if addon.price == 0 %}
						<button type="button" class="btn btn-primary" id="checkoutButton">Donate</button>
					{% else %}
						<button type="button" class="btn btn-primary" id="checkoutButton">Purchase</button>
					{% endif %}
				</div>
			</div>
			<!-- /.modal-content -->
		</div>
		<!-- /.modal-dialog -->
	</div><!-- /.modal -->
{% endblock %}

{% block scripts %}
	<script src="https://checkout.stripe.com/checkout.js"></script>
	<script src="{{ assetPrefix }}/plugins/master-slider/quick-start/masterslider/masterslider.js"></script>
	<script async>
		// Attach the addon to the window so it can be accessed from client-side Javascript
		window.addon = {{ addon|json|safe }};
		window.stripePublicKey = '{{ sails.config.stripe.publicKey }}';

		var MasterSliderShowcase2 = function () {

			return {

				//Master Slider
				initMasterSliderShowcase2: function () {
					var slider = new MasterSlider();

					slider.control('arrows');
					slider.control('thumblist', {
						autohide: false,
						dir: 'h',
						arrows: false,
						align: 'bottom',
						width: 180,
						height: 170,
						margin: 5,
						space: 5
					});

					slider.setup('masterslider', {
						width: 550,
						height: 550,
						space: 5,
						view: 'fade'
					});
				}

			};

		}();

		MasterSliderShowcase2.initMasterSliderShowcase2();
	</script>
	<script async src="{{ assetPrefix }}/js/pages/addons/viewaddon.js"></script>
{% endblock %}